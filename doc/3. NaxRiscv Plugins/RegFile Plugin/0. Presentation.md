RegFile Plugin is a plugin that manages the register file

[code](https://github.com/SpinalHDL/NaxRiscv/blob/main/src/main/scala/naxriscv/misc/RegFilePlugin.scala)

___

The `RegFilePlugin` is a wrapper which manages ports to a regfile component, and allows ports to be created by other plugins.

The regfile component can be either :
- `RegFileAsync` if we are using the FPGA implementation, distributed RAM is used in this case
- `RegFileLatch` if we are using the ASIC implementation

In NaxRiscv, we can have up to 2 `RegFilePlugin` implemented:
- 1 as integer regfile
- 1 as float regfile, if the NaxRiscv uses an FPU
The type of regfile is declared to `RegFilePlugin` using the  `spec` argument.

The others `RegFilePlugin` arguments are :
- `physicalDepth` : number of registers (default = 64)
- `bankCount` : number of banks between which the registry file is distributed (default = 1)
- `preferedWritePortForInit` : The write port used for registers initialisation (default = ALU0 write port). Either initialise R0 to 0 or all registers bits to 1. (default R0 to 0)
- `asyncReadBySyncReadRevertedClk` : 
- `allOne` : if true, initialise all registers bits to 1 (default = false).
- `latchBased` : if true, use the `RegFileLatch` for ASIC (default = false).


<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 918.9444444444445 461" width="918.9444444444445" height="461">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="918.9444444444445" height="461" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(217.94444444444446 10) rotate(0 345.5 220.5)"><path d="M0 0 C271.76 0, 543.53 0, 691 0 M0 0 C164.48 0, 328.97 0, 691 0 M691 0 C691 117.37, 691 234.73, 691 441 M691 0 C691 88.7, 691 177.4, 691 441 M691 441 C433.14 441, 175.29 441, 0 441 M691 441 C442.81 441, 194.62 441, 0 441 M0 441 C0 338.86, 0 236.72, 0 0 M0 441 C0 325.34, 0 209.67, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(497.94444444444446 15) rotate(0 65.5 11.5)"><text x="65.5" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFile Plugin</text></g><g stroke-linecap="round" transform="translate(748.9444444444445 41.5) rotate(0 68 196.5)"><path d="M0 0 C45.48 0, 90.97 0, 136 0 M0 0 C44.9 0, 89.8 0, 136 0 M136 0 C136 137.85, 136 275.7, 136 393 M136 0 C136 102.83, 136 205.67, 136 393 M136 393 C93.6 393, 51.2 393, 0 393 M136 393 C106.19 393, 76.38 393, 0 393 M0 393 C0 267.71, 0 142.42, 0 0 M0 393 C0 291.12, 0 189.23, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(764.9444444444445 215) rotate(0 52 23)"><text x="52" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFile </text><text x="52" y="41" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">Component</text></g><g stroke-linecap="round" transform="translate(315.44444444444446 120.5) rotate(0 71.5 33.5)"><path d="M0 0 C43.74 0, 87.48 0, 143 0 M0 0 C50.73 0, 101.47 0, 143 0 M143 0 C143 22.1, 143 44.19, 143 67 M143 0 C143 23.67, 143 47.34, 143 67 M143 67 C86.61 67, 30.21 67, 0 67 M143 67 C110.53 67, 78.06 67, 0 67 M0 67 C0 50.54, 0 34.08, 0 0 M0 67 C0 53.25, 0 39.51, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(331.94444444444446 131) rotate(0 55 23)"><text x="55" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">writeMerges</text><text x="55" y="41" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr"></text></g><g stroke-linecap="round"><g transform="translate(746.6967380224262 83) rotate(0 -302.87614678899115 0)"><path d="M0 0 C-215.02 0, -430.04 0, -605.75 0 M0 0 C-167.73 0, -335.46 0, -605.75 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(746.6967380224262 83) rotate(0 -302.87614678899115 0)"><path d="M-605.75 0 L-592.16 -6.34 L-592.16 6.34 L-605.75 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M-605.75 0 C-600.93 -2.25, -596.1 -4.5, -592.16 -6.34 M-605.75 0 C-601.99 -1.76, -598.22 -3.51, -592.16 -6.34 M-592.16 -6.34 C-592.16 -2.79, -592.16 0.77, -592.16 6.34 M-592.16 -6.34 C-592.16 -3, -592.16 0.34, -592.16 6.34 M-592.16 6.34 C-597.59 3.81, -603.02 1.28, -605.75 0 M-592.16 6.34 C-595.62 4.72, -599.09 3.11, -605.75 0 M-605.75 0 C-605.75 0, -605.75 0, -605.75 0 M-605.75 0 C-605.75 0, -605.75 0, -605.75 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(142 52.5) rotate(0 34.5 9)"><text x="34.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">newRead</text></g><g stroke-linecap="round"><g transform="translate(745.9444444444445 155) rotate(0 -143.5 0)"><path d="M0 0 C-79.16 0, -158.31 0, -287 0 M0 0 C-97.64 0, -195.27 0, -287 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(745.9444444444445 155) rotate(0 -143.5 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-3.75 1.75, -7.5 3.5, -13.59 6.34 M0 0 C-4.62 2.16, -9.25 4.31, -13.59 6.34 M-13.59 6.34 C-13.59 3.01, -13.59 -0.32, -13.59 -6.34 M-13.59 6.34 C-13.59 1.47, -13.59 -3.39, -13.59 -6.34 M-13.59 -6.34 C-8.86 -4.13, -4.12 -1.92, 0 0 M-13.59 -6.34 C-8.48 -3.95, -3.37 -1.57, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(315.44444444444446 205.5) rotate(0 71.5 48.5)"><path d="M0 0 C51.45 0, 102.9 0, 143 0 M0 0 C56.23 0, 112.45 0, 143 0 M143 0 C143 24.07, 143 48.14, 143 97 M143 0 C143 31.3, 143 62.6, 143 97 M143 97 C85.88 97, 28.76 97, 0 97 M143 97 C87.85 97, 32.69 97, 0 97 M0 97 C0 67.56, 0 38.12, 0 0 M0 97 C0 77.37, 0 57.74, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(331.94444444444446 242.5) rotate(0 55 11.5)"><text x="55" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">writeMerges</text></g><g stroke-linecap="round"><g transform="translate(312.94444444444446 138) rotate(0 -86 0)"><path d="M0 0 C-57.57 0, -115.13 0, -172 0 M0 0 C-36.27 0, -72.54 0, -172 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(312.94444444444446 138) rotate(0 -86 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-4.55 2.12, -9.1 4.24, -13.59 6.34 M0 0 C-2.87 1.34, -5.73 2.67, -13.59 6.34 M-13.59 6.34 C-13.59 3.75, -13.59 1.16, -13.59 -6.34 M-13.59 6.34 C-13.59 2.11, -13.59 -2.12, -13.59 -6.34 M-13.59 -6.34 C-10.02 -4.67, -6.45 -3.01, 0 0 M-13.59 -6.34 C-8.91 -4.16, -4.23 -1.97, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(312.94444444444446 172) rotate(0 -86 0)"><path d="M0 0 C-56.25 0, -112.5 0, -172 0 M0 0 C-54.51 0, -109.03 0, -172 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(312.94444444444446 172) rotate(0 -86 0)"><path d="M-172 0 L-158.41 -6.34 L-158.41 6.34 L-172 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M-172 0 C-167.55 -2.07, -163.11 -4.15, -158.41 -6.34 M-172 0 C-167.69 -2.01, -163.38 -4.02, -158.41 -6.34 M-158.41 -6.34 C-158.41 -2, -158.41 2.34, -158.41 6.34 M-158.41 -6.34 C-158.41 -2.48, -158.41 1.37, -158.41 6.34 M-158.41 6.34 C-161.13 5.07, -163.85 3.8, -172 0 M-158.41 6.34 C-161.15 5.06, -163.89 3.78, -172 0 M-172 0 C-172 0, -172 0, -172 0 M-172 0 C-172 0, -172 0, -172 0" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(323.44444444444446 162.5) rotate(0 14.5 9)"><text x="0" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">true</text></g><g transform="translate(10 111) rotate(0 101.5 9)"><text x="101.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">newWrite (withReady = true)</text></g><g transform="translate(161.44444444444446 148) rotate(0 20.5 9)"><text x="20.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">ready</text></g><g transform="translate(486.94444444444446 128) rotate(0 115.5 9)"><text x="115.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFileWrite(withReady = false)</text></g><g transform="translate(555.4444444444445 56) rotate(0 47 9)"><text x="47" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFileRead</text></g><g stroke-linecap="round"><g transform="translate(312.41666666666674 256.5) rotate(0 -86 0)"><path d="M0 0 C-36.75 0, -73.51 0, -172 0 M0 0 C-45.54 0, -91.09 0, -172 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(312.41666666666674 256.5) rotate(0 -86 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-2.9 1.35, -5.81 2.71, -13.59 6.34 M0 0 C-3.6 1.68, -7.2 3.36, -13.59 6.34 M-13.59 6.34 C-13.59 2.84, -13.59 -0.67, -13.59 -6.34 M-13.59 6.34 C-13.59 2.94, -13.59 -0.46, -13.59 -6.34 M-13.59 -6.34 C-8.51 -3.97, -3.43 -1.6, 0 0 M-13.59 -6.34 C-8.2 -3.82, -2.81 -1.31, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(49.97222222222217 230.5) rotate(0 80 9)"><text x="80" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">newWrite (latency = 0)</text></g><g stroke-linecap="round"><g transform="translate(748.4444444444445 232.5) rotate(0 -143.5 0)"><path d="M0 0 C-113.82 0, -227.65 0, -287 0 M0 0 C-70.07 0, -140.14 0, -287 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(748.4444444444445 232.5) rotate(0 -143.5 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-5.39 2.51, -10.78 5.03, -13.59 6.34 M0 0 C-3.32 1.55, -6.64 3.1, -13.59 6.34 M-13.59 6.34 C-13.59 3.26, -13.59 0.19, -13.59 -6.34 M-13.59 6.34 C-13.59 3.74, -13.59 1.14, -13.59 -6.34 M-13.59 -6.34 C-8.37 -3.9, -3.14 -1.47, 0 0 M-13.59 -6.34 C-8.43 -3.93, -3.27 -1.52, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(558.4444444444445 205.5) rotate(0 46.5 9)"><text x="46.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFileWrite</text></g><g stroke-linecap="round"><g transform="translate(747.4444444444445 276.5) rotate(0 -143.5 0)"><path d="M0 0 C-71.52 0, -143.04 0, -287 0 M0 0 C-112.55 0, -225.1 0, -287 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(747.4444444444445 276.5) rotate(0 -143.5 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-3.39 1.58, -6.78 3.16, -13.59 6.34 M0 0 C-5.33 2.49, -10.66 4.97, -13.59 6.34 M-13.59 6.34 C-13.59 2.92, -13.59 -0.5, -13.59 -6.34 M-13.59 6.34 C-13.59 3.16, -13.59 -0.02, -13.59 -6.34 M-13.59 -6.34 C-9.36 -4.37, -5.13 -2.39, 0 0 M-13.59 -6.34 C-9.17 -4.28, -4.76 -2.22, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(577.4444444444445 249.5) rotate(0 26.5 9)"><text x="26.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">Bypass</text></g><g stroke-linecap="round" transform="translate(315.44444444444446 319.5) rotate(0 71.5 48.5)"><path d="M0 0 C45.21 0, 90.43 0, 143 0 M0 0 C34.17 0, 68.34 0, 143 0 M143 0 C143 38.11, 143 76.22, 143 97 M143 0 C143 35.17, 143 70.34, 143 97 M143 97 C92.24 97, 41.48 97, 0 97 M143 97 C86.69 97, 30.38 97, 0 97 M0 97 C0 59.34, 0 21.67, 0 0 M0 97 C0 74.29, 0 51.57, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(331.94444444444446 356.5) rotate(0 55 11.5)"><text x="55" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">writeMerges</text></g><g stroke-linecap="round"><g transform="translate(313.16666666666674 347) rotate(0 -86 0)"><path d="M0 0 C-68.79 0, -137.59 0, -172 0 M0 0 C-44.28 0, -88.56 0, -172 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(313.16666666666674 347) rotate(0 -86 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-5.44 2.54, -10.87 5.07, -13.59 6.34 M0 0 C-3.5 1.63, -7 3.26, -13.59 6.34 M-13.59 6.34 C-13.59 3.43, -13.59 0.52, -13.59 -6.34 M-13.59 6.34 C-13.59 2.96, -13.59 -0.42, -13.59 -6.34 M-13.59 -6.34 C-9.22 -4.3, -4.85 -2.26, 0 0 M-13.59 -6.34 C-9.42 -4.39, -5.25 -2.45, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(18.22222222222217 321) rotate(0 95.5 9)"><text x="95.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">newWrite (sharingKey = A)</text></g><g stroke-linecap="round"><g transform="translate(312.16666666666674 390) rotate(0 -86 0)"><path d="M0 0 C-54.5 0, -109.01 0, -172 0 M0 0 C-43 0, -86 0, -172 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(312.16666666666674 390) rotate(0 -86 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-4.31 2.01, -8.62 4.02, -13.59 6.34 M0 0 C-3.4 1.58, -6.8 3.17, -13.59 6.34 M-13.59 6.34 C-13.59 1.65, -13.59 -3.04, -13.59 -6.34 M-13.59 6.34 C-13.59 2.38, -13.59 -1.59, -13.59 -6.34 M-13.59 -6.34 C-10.18 -4.75, -6.76 -3.15, 0 0 M-13.59 -6.34 C-8.61 -4.02, -3.63 -1.69, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(17.22222222222217 364) rotate(0 95.5 9)"><text x="95.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">newWrite (sharingKey = A)</text></g><g stroke-linecap="round"><g transform="translate(747.4444444444445 370.5) rotate(0 -143.5 0)"><path d="M0 0 C-78.37 0, -156.74 0, -287 0 M0 0 C-106.16 0, -212.31 0, -287 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(747.4444444444445 370.5) rotate(0 -143.5 0)"><path d="M0 0 L-13.59 6.34 L-13.59 -6.34 L0 0" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M0 0 C-3.71 1.73, -7.42 3.46, -13.59 6.34 M0 0 C-5.03 2.34, -10.06 4.69, -13.59 6.34 M-13.59 6.34 C-13.59 1.42, -13.59 -3.49, -13.59 -6.34 M-13.59 6.34 C-13.59 3.45, -13.59 0.57, -13.59 -6.34 M-13.59 -6.34 C-8.19 -3.82, -2.78 -1.3, 0 0 M-13.59 -6.34 C-10.46 -4.88, -7.33 -3.42, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(557.4444444444445 343.5) rotate(0 46.5 9)"><text x="46.5" y="14" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">RegFileWrite</text></g></svg>

#### Read

A plugin that wants to read the register file must create a read port.
It does this using the `newRead` function of `RegFilePlugin`. This function will add a read port to the register file component, so that each plugin that uses it will have its own read port.

The `newRead` function arguments :
- `withReady` : creates a read port with the ready field, by default all plugins set this to false, as the case `withReady = true` is not implemented and cannot be used in the regfile component.
- `forceNoBypass` : force a bypass port not to be created for this read port, if one can be created.

#### Write

A plugin that wants to write to the register file must create a write port.
It does this using the `newWrite` function of `RegFilePlugin`. This function will add a write port to the register file component, so that each plugin that uses it will have its own write port.

The `newWrite` function arguments :
- `withReady` : creates a write port with the ready field.
	- If a single port uses the ready field, the `RegFilePlugin` will set ready to true and create a write port to the regfile component with `withReady = false`.
	- If a sharing port uses the ready field, the `RegFilePlugin` will set ready to the priority mask and create a write port to the regfile component with `withReady = false`.
- `latency` : write latency
- `sharingKey` : key used to find plugins that share the same write port
- `priority` : priority between plugins that share the same write port

##### Sharing

To reduce the number of write ports to the regfile component, some plugins can share a write port. Thus, the `RegFilePlugin` will have multiple write ports from multiple plugins, but will redirect them to a single write port to the regfile component.

Plugins with the same `sharingKey` will share a write port. The `RegFilePlugin` will arbitrate between plugins using their `priority` value, and the `withReady` value.
You can only have one plugin port in the share port with `withReady = false`, and the ports must have different priorities.

Ports are arbitrated as follows:
- The highest priority is given to the port with `withReady = false`, because we can't make it wait with the ready signal if there are several requests.
- For the other ports, which should have `withReady = true`, the port with the highest `priority` value has the highest priority.

Of course arbitration is between ports that have a valid write request. The port selected as its ready signal set to true (for ports with `withReady = true`) .

To respect this arbitration, ports which have the same `sharingKey` must be declared in order of priority, using the `addRfWriteSharing` function, as in the Gen file.
In Naxriscv, there are 3 plugins which share a write port and with `sharingKey = intRfWrite`:
- `Lsu Plugin`
- `ExecuteUnitBase EU0`
- `FpuWriteback`
But since by default we don't use `Lsu Plugin` and `Fpu`, there is only `ExecuteUnitBase EU0`.

#### Bypass

Between `RegFilePlugin` and the other plugins, there are only read and write ports. But between the `RegFilePlugin` and the regfile component it contains, there is one more type of port, the bypass port.

It is used for write ports that have a write `latency = 0`. 
We create a bypass bus that takes the signals from the write bus with `latency = 0`.

If we have a write request and a read request on the same register, we will transmit the register value from the bypass bus to the read bus, instead of reading the register value from the register file memory. 
In fact, if we try to obtain the value from the memory of the register file, we won't get the value updated by the write request.
